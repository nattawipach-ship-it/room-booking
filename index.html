<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏û‡∏¥‡∏ò‡∏µ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ö‡∏±‡∏ï‡∏£</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'turquoise': '#06b6d4',
                        'turquoise-dark': '#0891b2',
                        'mint': '#10b981',
                        'mint-light': '#d1fae5'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-mint-light to-white min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">üè® ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h1>
            <p class="text-lg text-gray-600">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏û‡∏¥‡∏ò‡∏µ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ö‡∏±‡∏ï‡∏£ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 39</p>
            <p class="text-md text-gray-500">‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ 2567</p>
        </header>

        <!-- Navigation -->
        <nav class="flex justify-center mb-8">
            <div class="bg-white rounded-lg shadow-lg p-2 flex space-x-2">
                <button onclick="showPage('booking')" id="bookingTab" class="px-6 py-3 rounded-lg font-medium transition-all duration-200 bg-turquoise text-white">
                    üè® ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
                </button>
                <button onclick="showPage('myBookings')" id="myBookingsTab" class="px-6 py-3 rounded-lg font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100">
                    üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                </button>
                <button onclick="showPage('admin')" id="adminTab" class="px-6 py-3 rounded-lg font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100">
                    üë®‚Äçüíº ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á (Admin)
                </button>
                <button onclick="showPage('statistics')" id="statisticsTab" class="px-6 py-3 rounded-lg font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100">
                    üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                </button>
            </div>
        </nav>

        <!-- Booking Page -->
        <div id="bookingPage" class="page">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Date Selection and Guest Count -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</h2>
                    
                    <!-- Date Selection -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</label>
                        <input type="date" id="checkInDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent mb-3">
                        
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å:</label>
                        <input type="date" id="checkOutDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                    </div>

                    <!-- Guest Count -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</label>
                        <select id="guestCount" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô</option>
                            <option value="1">1 ‡∏Ñ‡∏ô</option>
                            <option value="2">2 ‡∏Ñ‡∏ô</option>
                            <option value="3">3 ‡∏Ñ‡∏ô</option>
                            <option value="4">4 ‡∏Ñ‡∏ô</option>
                        </select>
                    </div>

                    <button onclick="checkAvailability()" class="w-full bg-turquoise hover:bg-turquoise-dark text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                        üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
                    </button>
                </div>

                <!-- Room List -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">üè† ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h2>
                    <div id="roomList" class="space-y-3">
                        <!-- Rooms will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- My Bookings Page -->
        <div id="myBookingsPage" class="page hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
                
                <div id="myBookingsList" class="space-y-4">
                    <!-- Bookings will be populated here -->
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="page hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">üë®‚Äçüíº ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á (Admin)</h2>
                
                <!-- Filter Controls -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
                        <select id="adminStatusFilter" onchange="filterAdminBookings()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                            <option value="‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</option>
                            <option value="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á:</label>
                        <select id="adminRoomFilter" onchange="filterAdminBookings()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                        <input type="date" id="adminDateFilter" onchange="filterAdminBookings()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                    </div>
                </div>

                <div id="adminBookingsList" class="space-y-4">
                    <!-- Admin bookings will be populated here -->
                </div>
            </div>
        </div>

        <!-- Statistics Page -->
        <div id="statisticsPage" class="page hidden">
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
                    <div id="statisticsContent" class="space-y-4">
                        <!-- Statistics will be populated here -->
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">üìà ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏°</h2>
                    <div id="popularRooms" class="space-y-3">
                        <!-- Popular rooms will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-semibold text-gray-800 mb-6">üìù ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
            <form id="bookingForm" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</label>
                        <input type="text" id="modalRoomName" readonly class="w-full p-3 bg-gray-100 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</label>
                        <input type="text" id="modalTotalPrice" readonly class="w-full p-3 bg-gray-100 border border-gray-300 rounded-lg">
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</label>
                        <input type="text" id="modalCheckIn" readonly class="w-full p-3 bg-gray-100 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å:</label>
                        <input type="text" id="modalCheckOut" readonly class="w-full p-3 bg-gray-100 border border-gray-300 rounded-lg">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:</label>
                    <input type="text" id="bookerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï:</label>
                        <select id="campus" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</option>
                            <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞</option>
                            <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ</option>
                            <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô</option>
                            <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ì‡∏∞:</label>
                        <select id="faculty" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                            <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®</option>
                            <option value="‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°</option>
                            <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®">‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
                    <input type="tel" id="bookerPhone" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                </div>

                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-800 mb-2">üí≥ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h4>
                    <p class="text-sm text-gray-600 mb-2">
                        <strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</strong><br>
                        ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <span class="font-mono bg-yellow-100 px-2 py-1 rounded">123-456-789</span><br>
                        ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏£‡∏≤‡∏ä‡∏°‡∏á‡∏Ñ‡∏•‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å
                    </p>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</label>
                    <input type="file" id="paymentSlip" accept="image/*" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-turquoise focus:border-transparent">
                    <p class="text-xs text-gray-500 mt-1">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (JPG, PNG)</p>
                </div>

                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="flex-1 bg-mint hover:bg-green-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                        ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                    </button>
                    <button type="button" onclick="closeModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                        ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Booking Details Modal -->
    <div id="detailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-semibold text-gray-800 mb-6">üìÑ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
            <div id="bookingDetails" class="space-y-4">
                <!-- Details will be populated here -->
            </div>
            <div class="flex justify-end pt-4">
                <button onclick="closeDetailsModal()" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>
    </div>

    <!-- Payment Slip Modal -->
    <div id="paymentSlipModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-lg w-full">
            <h3 class="text-2xl font-semibold text-gray-800 mb-6">üí≥ ‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <div class="text-center">
                <img id="paymentSlipImage" src="" alt="Payment Slip" class="max-w-full h-auto rounded-lg shadow-md">
            </div>
            <div class="flex justify-end pt-4">
                <button onclick="closePaymentSlipModal()" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let bookings = JSON.parse(localStorage.getItem('accommodationBookings')) || [];
        
        const rooms = [
            { name: '‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏û‡∏•‡∏¥‡∏ô', capacity: 2, price: 1500, color: 'bg-purple-100 border-purple-300' },
            { name: '‡∏´‡πâ‡∏≠‡∏á‡∏ß‡∏¥‡∏ö‡∏π‡∏•‡∏¢‡πå', capacity: 2, price: 1500, color: 'bg-blue-100 border-blue-300' },
            { name: '‡∏´‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏£‡∏ì‡∏¥‡∏Å‡∏≤‡∏£‡πå', capacity: 2, price: 1500, color: 'bg-pink-100 border-pink-300' },
            { name: '‡∏´‡πâ‡∏≠‡∏á‡∏ß‡∏¥‡πÑ‡∏•‡∏ß‡∏£‡∏£‡∏ì', capacity: 4, price: 2000, color: 'bg-yellow-100 border-yellow-300' },
            { name: '‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏¥‡∏ô‡∏ó‡∏ô‡∏¥‡∏•', capacity: 4, price: 2000, color: 'bg-indigo-100 border-indigo-300' },
            { name: '‡∏´‡πâ‡∏≠‡∏á‡∏®‡∏£‡∏µ‡∏ß‡∏¥‡∏•‡∏±‡∏¢', capacity: 4, price: 2000, color: 'bg-green-100 border-green-300' }
        ];

        let selectedRoom = null;
        let selectedDates = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setDefaultDates();
        });

        function initializePage() {
            showPage('booking');
            displayRooms();
            updateMyBookings();
            updateStatistics();
            populateAdminRoomFilter();
        }

        function setDefaultDates() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const todayString = today.toISOString().split('T')[0];
            const tomorrowString = tomorrow.toISOString().split('T')[0];
            
            document.getElementById('checkInDate').value = todayString;
            document.getElementById('checkOutDate').value = tomorrowString;
            document.getElementById('checkInDate').min = todayString;
            document.getElementById('checkOutDate').min = todayString;

            // Add event listeners for date validation
            document.getElementById('checkInDate').addEventListener('change', validateDates);
            document.getElementById('checkOutDate').addEventListener('change', validateDates);
        }

        function validateDates() {
            const checkIn = new Date(document.getElementById('checkInDate').value);
            const checkOut = new Date(document.getElementById('checkOutDate').value);
            
            if (checkOut <= checkIn) {
                alert('‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å');
                document.getElementById('checkOutDate').value = '';
                return false;
            }
            return true;
        }

        function displayRooms() {
            const roomList = document.getElementById('roomList');
            roomList.innerHTML = rooms.map(room => `
                <div class="border-2 ${room.color} rounded-lg p-4 transition-all duration-200 hover:shadow-md">
                    <div class="flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold text-lg text-gray-800">${room.name}</h3>
                            <p class="text-sm text-gray-600">üë• ‡∏à‡∏∏‡πÑ‡∏î‡πâ ${room.capacity} ‡∏Ñ‡∏ô</p>
                            <p class="text-sm text-gray-600">üí∞ ${room.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô</p>
                        </div>
                        <div id="status-${room.name}" class="text-sm font-medium">
                            <span class="text-gray-500">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function populateAdminRoomFilter() {
            const adminRoomFilter = document.getElementById('adminRoomFilter');
            adminRoomFilter.innerHTML = '<option value="">‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á</option>';
            rooms.forEach(room => {
                adminRoomFilter.innerHTML += `<option value="${room.name}">${room.name}</option>`;
            });
        }

        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(pageName + 'Page').classList.remove('hidden');
            
            // Update tab styles
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('bg-turquoise', 'text-white');
                btn.classList.add('text-gray-600', 'hover:bg-gray-100');
            });
            
            document.getElementById(pageName + 'Tab').classList.add('bg-turquoise', 'text-white');
            document.getElementById(pageName + 'Tab').classList.remove('text-gray-600', 'hover:bg-gray-100');

            if (pageName === 'myBookings') {
                updateMyBookings();
            } else if (pageName === 'admin') {
                updateAdminBookings();
            } else if (pageName === 'statistics') {
                updateStatistics();
            }
        }

        function checkAvailability() {
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            const guestCount = parseInt(document.getElementById('guestCount').value);

            if (!checkInDate || !checkOutDate || !guestCount) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }

            if (!validateDates()) {
                return;
            }

            selectedDates = { checkIn: checkInDate, checkOut: checkOutDate, guests: guestCount };

            rooms.forEach(room => {
                const isAvailable = checkRoomAvailable(room.name, checkInDate, checkOutDate) && room.capacity >= guestCount;
                const statusElement = document.getElementById(`status-${room.name}`);
                const roomElement = statusElement.closest('.border-2');
                
                if (!isAvailable) {
                    if (room.capacity < guestCount) {
                        statusElement.innerHTML = '<span class="text-orange-600 font-semibold">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</span>';
                    } else {
                        statusElement.innerHTML = '<span class="text-red-600 font-semibold">‚ùå ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>';
                    }
                    roomElement.classList.remove('hover:shadow-md', 'cursor-pointer');
                    roomElement.onclick = null;
                } else {
                    statusElement.innerHTML = '<span class="text-green-600 font-semibold">‚úÖ ‡∏ß‡πà‡∏≤‡∏á</span>';
                    roomElement.classList.add('hover:shadow-md', 'cursor-pointer');
                    roomElement.onclick = () => openBookingModal(room);
                }
            });
        }

        function checkRoomAvailable(roomName, checkInDate, checkOutDate) {
            const checkIn = new Date(checkInDate);
            const checkOut = new Date(checkOutDate);
            
            return !bookings.some(booking => {
                if (booking.room !== roomName) return false;
                
                const bookingCheckIn = new Date(booking.checkInDate);
                const bookingCheckOut = new Date(booking.checkOutDate);
                
                return (checkIn < bookingCheckOut && checkOut > bookingCheckIn);
            });
        }

        function calculateNights(checkIn, checkOut) {
            const start = new Date(checkIn);
            const end = new Date(checkOut);
            return Math.ceil((end - start) / (1000 * 60 * 60 * 24));
        }

        function openBookingModal(room) {
            selectedRoom = room;
            const nights = calculateNights(selectedDates.checkIn, selectedDates.checkOut);
            const totalPrice = room.price * nights;

            document.getElementById('modalRoomName').value = room.name;
            document.getElementById('modalTotalPrice').value = `${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó (${nights} ‡∏Ñ‡∏∑‡∏ô)`;
            document.getElementById('modalCheckIn').value = new Date(selectedDates.checkIn).toLocaleDateString('th-TH');
            document.getElementById('modalCheckOut').value = new Date(selectedDates.checkOut).toLocaleDateString('th-TH');
            
            document.getElementById('bookingModal').classList.remove('hidden');
            document.getElementById('bookingModal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('bookingModal').classList.add('hidden');
            document.getElementById('bookingModal').classList.remove('flex');
            document.getElementById('bookingForm').reset();
        }

        function closeDetailsModal() {
            document.getElementById('detailsModal').classList.add('hidden');
            document.getElementById('detailsModal').classList.remove('flex');
        }

        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const paymentSlip = document.getElementById('paymentSlip').files[0];
            if (!paymentSlip) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô');
                return;
            }

            const nights = calculateNights(selectedDates.checkIn, selectedDates.checkOut);
            const totalPrice = selectedRoom.price * nights;

            // Convert file to base64 for storage
            const reader = new FileReader();
            reader.onload = function(e) {
                const booking = {
                    id: Date.now(),
                    room: selectedRoom.name,
                    checkInDate: selectedDates.checkIn,
                    checkOutDate: selectedDates.checkOut,
                    nights: nights,
                    guests: selectedDates.guests,
                    totalPrice: totalPrice,
                    bookerName: document.getElementById('bookerName').value,
                    campus: document.getElementById('campus').value,
                    faculty: document.getElementById('faculty').value,
                    bookerPhone: document.getElementById('bookerPhone').value,
                    paymentSlip: paymentSlip.name,
                    paymentSlipData: e.target.result, // Store base64 data
                    bookingDate: new Date().toISOString(),
                    status: '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô'
                };

                bookings.push(booking);
                localStorage.setItem('accommodationBookings', JSON.stringify(bookings));
                
                alert('‚úÖ ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà');
                closeModal();
                checkAvailability(); // Refresh room status
            };
            reader.readAsDataURL(paymentSlip);
        });

        function updateMyBookings() {
            const myBookingsList = document.getElementById('myBookingsList');
            
            if (bookings.length === 0) {
                myBookingsList.innerHTML = '<div class="text-center text-gray-500 py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</div>';
                return;
            }

            myBookingsList.innerHTML = bookings.map(booking => `
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-lg text-gray-800">${booking.room}</h3>
                            <p class="text-gray-600">üë§ ${booking.bookerName}</p>
                            <p class="text-gray-600">üè´ ${booking.faculty}</p>
                            <p class="text-gray-600">üìû ${booking.bookerPhone}</p>
                            <p class="text-gray-600">üìÖ ${new Date(booking.checkInDate).toLocaleDateString('th-TH')} - ${new Date(booking.checkOutDate).toLocaleDateString('th-TH')}</p>
                            <p class="text-gray-600">üë• ${booking.guests} ‡∏Ñ‡∏ô | üåô ${booking.nights} ‡∏Ñ‡∏∑‡∏ô</p>
                            <p class="text-gray-600">üí∞ ${booking.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                            <p class="text-sm ${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 'text-orange-600' : 'text-green-600'} font-semibold">
                                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${booking.status}
                            </p>
                        </div>
                        <button onclick="showBookingDetails(${booking.id})" class="bg-turquoise hover:bg-turquoise-dark text-white px-4 py-2 rounded-lg transition-colors duration-200">
                            üìÑ ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function showBookingDetails(bookingId) {
            const booking = bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const detailsContent = document.getElementById('bookingDetails');
            detailsContent.innerHTML = `
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="space-y-3">
                        <h4 class="font-semibold text-lg text-gray-800">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h4>
                        <p><strong>‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:</strong> ${booking.id}</p>
                        <p><strong>‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</strong> ${booking.room}</p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</strong> ${new Date(booking.checkInDate).toLocaleDateString('th-TH')}</p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å:</strong> ${new Date(booking.checkOutDate).toLocaleDateString('th-TH')}</p>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô:</strong> ${booking.nights} ‡∏Ñ‡∏∑‡∏ô</p>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</strong> ${booking.guests} ‡∏Ñ‡∏ô</p>
                        <p><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</strong> ${booking.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                        <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> <span class="${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 'text-orange-600' : 'text-green-600'} font-semibold">${booking.status}</span></p>
                    </div>
                    <div class="space-y-3">
                        <h4 class="font-semibold text-lg text-gray-800">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</h4>
                        <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${booking.bookerName}</p>
                        <p><strong>‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï:</strong> ${booking.campus}</p>
                        <p><strong>‡∏Ñ‡∏ì‡∏∞:</strong> ${booking.faculty}</p>
                        <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> ${booking.bookerPhone}</p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á:</strong> ${new Date(booking.bookingDate).toLocaleDateString('th-TH')}</p>
                        <p><strong>‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> 
                            <button onclick="showPaymentSlip('${booking.paymentSlipData}')" class="text-turquoise hover:text-turquoise-dark underline ml-2">
                                üìÑ ‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ
                            </button>
                        </p>
                    </div>
                </div>
            `;

            document.getElementById('detailsModal').classList.remove('hidden');
            document.getElementById('detailsModal').classList.add('flex');
        }

        function updateAdminBookings() {
            filterAdminBookings();
        }

        function filterAdminBookings() {
            const adminBookingsList = document.getElementById('adminBookingsList');
            const statusFilter = document.getElementById('adminStatusFilter').value;
            const roomFilter = document.getElementById('adminRoomFilter').value;
            const dateFilter = document.getElementById('adminDateFilter').value;
            
            let filteredBookings = bookings;
            
            if (statusFilter) {
                filteredBookings = filteredBookings.filter(booking => booking.status === statusFilter);
            }
            
            if (roomFilter) {
                filteredBookings = filteredBookings.filter(booking => booking.room === roomFilter);
            }
            
            if (dateFilter) {
                filteredBookings = filteredBookings.filter(booking => booking.checkInDate === dateFilter);
            }

            if (filteredBookings.length === 0) {
                adminBookingsList.innerHTML = '<div class="text-center text-gray-500 py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</div>';
                return;
            }

            adminBookingsList.innerHTML = filteredBookings.map(booking => `
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-lg text-gray-800">${booking.room}</h3>
                            <p class="text-gray-600">üë§ ${booking.bookerName}</p>
                            <p class="text-gray-600">üè´ ${booking.faculty}</p>
                            <p class="text-gray-600">üìû ${booking.bookerPhone}</p>
                            <p class="text-gray-600">üìÖ ${new Date(booking.checkInDate).toLocaleDateString('th-TH')} - ${new Date(booking.checkOutDate).toLocaleDateString('th-TH')}</p>
                            <p class="text-gray-600">üë• ${booking.guests} ‡∏Ñ‡∏ô | üåô ${booking.nights} ‡∏Ñ‡∏∑‡∏ô</p>
                            <p class="text-gray-600">üí∞ ${booking.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                            <p class="text-sm ${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 'text-orange-600' : 'text-green-600'} font-semibold">
                                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${booking.status}
                            </p>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <button onclick="showBookingDetails(${booking.id})" class="bg-turquoise hover:bg-turquoise-dark text-white px-4 py-2 rounded-lg transition-colors duration-200">
                                üìÑ ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                            </button>
                            <button onclick="showPaymentSlip('${booking.paymentSlipData}')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                                üí≥ ‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ
                            </button>
                            ${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 
                                `<button onclick="confirmBooking(${booking.id})" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                                </button>` : 
                                `<span class="text-green-600 text-sm font-semibold text-center">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>`
                            }
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function confirmBooking(bookingId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                if (bookingIndex !== -1) {
                    bookings[bookingIndex].status = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß';
                    localStorage.setItem('accommodationBookings', JSON.stringify(bookings));
                    updateAdminBookings();
                    alert('‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                }
            }
        }

        function showPaymentSlip(paymentSlipData) {
            if (!paymentSlipData) {
                alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô');
                return;
            }
            
            document.getElementById('paymentSlipImage').src = paymentSlipData;
            document.getElementById('paymentSlipModal').classList.remove('hidden');
            document.getElementById('paymentSlipModal').classList.add('flex');
        }

        function closePaymentSlipModal() {
            document.getElementById('paymentSlipModal').classList.add('hidden');
            document.getElementById('paymentSlipModal').classList.remove('flex');
        }

        function updateStatistics() {
            const statisticsContent = document.getElementById('statisticsContent');
            const popularRooms = document.getElementById('popularRooms');
            
            // Calculate statistics
            const totalBookings = bookings.length;
            const totalRevenue = bookings.reduce((sum, booking) => sum + booking.totalPrice, 0);
            const roomUsage = {};
            const campusUsage = {};
            
            bookings.forEach(booking => {
                // Room usage
                roomUsage[booking.room] = (roomUsage[booking.room] || 0) + 1;
                
                // Campus usage
                campusUsage[booking.campus] = (campusUsage[booking.campus] || 0) + 1;
            });

            // Most popular campus
            const mostPopularCampus = Object.keys(campusUsage).reduce((a, b) => 
                campusUsage[a] > campusUsage[b] ? a : b, Object.keys(campusUsage)[0] || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'
            );

            statisticsContent.innerHTML = `
                <div class="bg-turquoise text-white p-4 rounded-lg">
                    <h3 class="font-semibold text-lg">üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <p class="text-2xl font-bold">${totalBookings} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                </div>
                <div class="bg-mint text-white p-4 rounded-lg">
                    <h3 class="font-semibold text-lg">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</h3>
                    <p class="text-xl font-bold">${totalRevenue.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                </div>
                <div class="bg-blue-500 text-white p-4 rounded-lg">
                    <h3 class="font-semibold text-lg">üè´ ‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡∏¢‡∏°</h3>
                    <p class="text-lg font-bold">${mostPopularCampus}</p>
                </div>
                <div class="bg-purple-500 text-white p-4 rounded-lg">
                    <h3 class="font-semibold text-lg">üè† ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <p class="text-2xl font-bold">${rooms.length} ‡∏´‡πâ‡∏≠‡∏á</p>
                </div>
            `;

            // Popular rooms
            const sortedRooms = Object.entries(roomUsage)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 3);

            if (sortedRooms.length === 0) {
                popularRooms.innerHTML = '<div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>';
            } else {
                popularRooms.innerHTML = sortedRooms.map(([room, count], index) => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}</span>
                            <span class="font-medium">${room}</span>
                        </div>
                        <span class="bg-turquoise text-white px-3 py-1 rounded-full text-sm font-semibold">${count} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
                    </div>
                `).join('');
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'979bedac2715a1b1',t:'MTc1Njk3MjU2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
